#!/usr/bin/env node

const app = require('../app');
const http = require('http');

const port = process.env.PORT || 3000;

app.set('port', port);

const server = http.createServer(app);

let url = process.env.APP_URL;
url = url.substr(0, url.lastIndexOf(':'));

server.listen(port);
server.on('listening', () => {
    if (process.env.NODE_ENV !== 'test') {
        console.log(`Express server running on ${url}:${port}`);
    }
});

module.exports = server;
